// mB v6.10.12 on 2019-10-22T23:53:32.938Z
"use strict"
Object.defineProperty(exports,"__esModule",{value:!0})
var AttachAddon=function(){function AttachAddon(t,e){this._disposables=[],this._socket=t,this._socket.binaryType="arraybuffer",this._bidirectional=!e||!1!==e.bidirectional}return AttachAddon.prototype.activate=function(t){var e=this
this._disposables.push(addSocketListener(this._socket,"message",(function(e){var s=e.data
t.write("string"==typeof s?s:new Uint8Array(s))}))),this._bidirectional&&this._disposables.push(t.onData((function(t){return e._sendData(t)}))),this._disposables.push(addSocketListener(this._socket,"close",(function(){return e.dispose()}))),this._disposables.push(addSocketListener(this._socket,"error",(function(){return e.dispose()})))},AttachAddon.prototype.dispose=function(){this._disposables.forEach((function(t){return t.dispose()}))},AttachAddon.prototype._sendData=function(t){1===this._socket.readyState&&this._socket.send(t)},AttachAddon}()
function addSocketListener(t,e,s){return t.addEventListener(e,s),{dispose:function(){s&&t.removeEventListener(e,s)}}}exports.AttachAddon=AttachAddon